![REST](https://img.shields.io/badge/REST-API-brightgreen)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-logo-316192?logo=postgresql)](https://www.postgresql.org/)
![JDBC](https://img.shields.io/badge/JDBC-Template-red)
[![Spring Web](https://img.shields.io/badge/Spring%20Web-logo-6DB33F?logo=spring)](https://spring.io/projects/spring-framework)
[![Spring Core](https://img.shields.io/badge/Spring%20Core-logo-6DB33F?logo=spring)](https://spring.io/projects/spring-framework)
[![Spring MVC](https://img.shields.io/badge/Spring%20MVC-logo-6DB33F?logo=spring)](https://spring.io/projects/spring-framework)
[![Hibernate](https://img.shields.io/badge/Hibernate-logo-59666C?logo=hibernate)](https://hibernate.org/)
[![Spring JPA](https://img.shields.io/badge/Spring%20JPA-logo-6DB33F?logo=spring)](https://spring.io/projects/spring-data-jpa)
[![Spring Security](https://img.shields.io/badge/Spring%20Security-logo-6DB33F?logo=spring)](https://spring.io/projects/spring-security)
[![Apache Maven](https://img.shields.io/badge/Apache%20Maven-logo-C71A36?logo=apache-maven)](https://maven.apache.org/)
[![Thymeleaf](https://img.shields.io/badge/Thymeleaf-logo-005C00?logo=thymeleaf)](https://www.thymeleaf.org/)
[![Spring Boot](https://img.shields.io/badge/Spring%20Boot-logo-6DB33F?logo=spring)](https://spring.io/projects/spring-boot)
[![Postman](https://img.shields.io/badge/Postman-logo-FF6C37?logo=postman)](https://www.postman.com/)
![Apache Tomcat](https://img.shields.io/badge/apache%20tomcat-%23F8DC75.svg?logo=apache-tomcat&logoColor=black)

> [!CAUTION]
> Проект устарел и не показывает всю полноту понимания. Актуальный проект — [spring-framework-blog](https://github.com/rukonpin/pet-projects-java/tree/master/bookkeeping-jdbc)
> 
## Краткое описание

Первые 2 приложение (2 версии на [JDBC](https://github.com/rukonpin/pet-projects-java/tree/master/bookkeeping-jdbc) и [JPA](https://github.com/rukonpin/pet-projects-java/tree/master/bookkeeping-jpa) 
для учёта читателей и книг — регистрация читателей, CRUD для книг/читателей, выдача и возврат книг. Используется простая валидация.

### Схема БД (JPA проекта)
```sql
CREATE TABLE Person(
	id int PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	full_name varchar(255) NOT NULL UNIQUE,
	birth_year int CHECK(birth_year > 1900) NOT NULL
);

CREATE TABLE Book(
	id int PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	person_id int REFERENCES Person(id) ON DELETE SET NULL,
	title varchar(255) NOT NULL,
	author varchar(255) NOT NULL,
	year int CHECK(year > 0) NOT NULL
);
```

#### Endpoints:

**People**
- `GET /people` — список всех людей.
- `GET /people/new` — форма создания человека.
- `POST /people` — создать человека.
- `GET /people/{id}` — просмотр человека + список его книг.
- `GET /people/{id}/edit` — форма редактирования.
- `PATCH /people/{id}` — обновить.
- `DELETE /people/{id}` — удалить.

**Books**
- `GET /books` — список книг.
- - Опциональные query параметры `/books?page=1&books_per_page=3` или `/books?page=1&books_per_page=3&sort_by_year=true`:
    - `page` — номер страницы.
    - `books_per_page` — сколько книг на страницу.
    - `sort_by_year` — если true — сортировка по году.
- `GET /books/new` — форма создания книги.
- `POST /books` — создать книгу.
- `GET /books/{id}` — страница книги: поля + владелец (или сообщение «свободна»). Если книга свободна — на странице select со всеми людьми, кнопка «Назначить».
- `PATCH /books/{id}/assign` — назначить книгу человеку.
- `PATCH /books/{id}/release` — освободить книгу.
- `GET /books/{id}/edit` — редактирование.
- `PATCH /books/{id}` — обновить.
- `DELETE /books/{id}` — удалить.
- `GET /books/search` — страница поиска (начальные буквы названия).

![books](https://raw.githubusercontent.com/rukonpin/pet-projects-java/refs/heads/master/books.gif)
![people](https://raw.githubusercontent.com/rukonpin/pet-projects-java/refs/heads/master/people.gif)
![optional](https://raw.githubusercontent.com/rukonpin/pet-projects-java/refs/heads/master/optional.gif)


------

Проект [Sensors REST API](https://github.com/rukonpin/pet-projects-java/tree/master/SensorsService),
который принимает данные от метеорологических сенсоров, сохраняет их в БД, возвращает список измерений и считает количество дождливых дней.

Дополнительно переход на DTO, обработка ошибок

### Схема БД
```sql
CREATE TABLE Sensor(
	id int PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	name varchar(30) UNIQUE NOT NULL
)

CREATE TABLE Measurement(
	id int PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	value numeric(4,1) NOT NULL,
	raining boolean NOT NULL,
	sensor varchar(30) REFERENCES Sensor(name),
	created_at timestamp NOT NULL
)
```

#### Endpoints:
- `POST /sensors/registration` — Регистрация сенсора
- `POST /measurements/add` — Добавление измерения. Без регистрации сенсора, данные не будут добавлены.
```json
 {
"value": 24.7,
"raining": false,
"sensor": {
    "name": "Test"
 }
```
- `GET /measurements` — Получить все измерения
- `GET /measurements/rainyDaysCount` — Посчитать дождливые дни
